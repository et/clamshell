#!/usr/bin/env ruby

require File.dirname(__FILE__) + '/../lib/spider'
require File.dirname(__FILE__) + '/../lib/spider/cli'

begin
  Spider::CLI.start
rescue Spider::SafeExit => e
  Spider.ui.warn e.message
  exit 0
rescue StandardError => e
  Spider.ui.error e.message
  Spider.ui.debug e.backtrace.join("\n")
  exit 1
rescue Interrupt => e
  Spider.ui.error "\nQuitting..."
  Spider.ui.debug e.backtrace.join("\n")
  exit 1
end

# Finally start parsing the dependency file. A custom DSL
# that needs to be well-formed.
#begin
#  eval(File.read(opts[:dependency_file])).display
#rescue SyntaxError => se
#  puts 'Dependencies file is not well-formed'.red
#  exit(1)
#end
